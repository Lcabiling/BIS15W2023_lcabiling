knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
names(fisheries)
dim(fisheries)
anyNA(fisheries)
class(fisheries)
fisheries <- janitor::clean_names(fisheries)
glimpse(fisheries)
names(fisheries)
glimpse(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
class(fisheries)
class(fisheries$country)
class(fisheries$isscaap_group_number)
class(fisheries$asfis_species_number)
class(fisheries$fao_major_fishing_area)
#fisheries_tidy <- fisheries %>%
#  pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,as#fis_species_number,asfis_species_name,fao_major_fishing_area,measure),
#               names_to = "year",
#               values_to = "catch",
#               values_drop_na = TRUE) %>%
#  mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
#  mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
#  mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
#  mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
#  mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
#
#fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries %>%
count(country) %>%
tabyl(country)
fisheries %>%
count(country) %>%
table(country)
fisheries %>%
count(country)
fisheries %>%
count(country), n_distinct()
fisheries %>%
count(country) %>%
n_distinct(country)
fisheries %>%
count(country)
fisheries %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
names(fisheries)
glimpse(fisheries)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,as fis_species_number,asfis_species_name,fao_major_fishing_area,measure),
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries %>%
count(country)
glimpse(fisheries)
fisheries %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
names(fisheries)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
names(fisheries)
fisheries <- janitor::clean_names(fisheries)
names(fisheries)
glimpse(fisheries)
fisheries <- janitor::clean_names(fisheries)
names(fisheries)
knitr::opts_chunk$set(echo = TRUE)
names(fisheries)
fisheries <- janitor::clean_names(fisheries)
names(fisheries)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
names(fisheries)
dim(fisheries)
anyNA(fisheries)
class(fisheries)
fisheries <- janitor::clean_names(fisheries)
names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
class(fisheries$country)
class(fisheries$isscaap_group_number)
class(fisheries$asfis_species_number)
class(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
names(fisheries)
names(fisheries_tidy)
fisheries_tidy %>%
count(country)
fisheries_tidy %>%
count(country) %>%
table(country)
fisheries_tidy %>%
count(country) %>%
tabyl(country)
fisheries_tidy %>%
count(country)
names(fisheries)
names(fisheries_tid)
names(fisheries_tidy)
fisheries %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
n_distinct(asfis_species_number)
fisheries_tidy %>%
summarize(distinct_fish_species = n_distinct(asfis_species_number))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
ecosphere <- read_csv("data/ecs21351-sup-0003-SupplementS1.csv", skip=2) %>%
clean_names() %>%
slice(1:(n() - 18)) # this removes the footer
names(ecosphere)
glimpse(ecosphere)
ecosphere %>%
summarize(distinct_orders_birds = n_distinct(order))
ecosphere %>%
group_by(habitat) %>%
ecosphere %>%
group_by(habitat) %>%
ecosphere %>%
group_by(habitat)
ecosphere %>%
group_by(habitat) %>%
tabyl(common_name)
ecosphere %>%
group_by(habitat) %>%
summarize(distinct_species = n_distict(common_name))
ecosphere %>%
group_by(habitat) %>%
summarize(distinct_species = n_distict(common_name))
ecosphere %>%
group_by(habitat)
ecosphere %>%
group_by(habitat) %>%
summarize(total=n())
?slice_max
slice_max(ecosphere, winter_range_area)
```{r}
slice_min(ecosphere, winter_range_area)
ducks <- ecosphere %>%
filter(family=="Anatidae") %>%
select(!c(order, family))
glimpse(ducks)
ducks <- ecosphere %>%
filter(family=="Anatidae")
glimpse(ducks)
view(ducks)
ducks <- ecosphere %>%
filter(family=="Anatidae") %>%
select(!c(order, family))
glimpse(ducks)
names(ducks)
names(ecosphere)
names(ecosphere)
names(ducks)
ducks %>%
group_by(habitat)
ducks %>%
group_by(habitat) %>%
summarize(total=n())
ducks %>%
filter(habitat=="Ocean")
names(ducks)
ducks %>%
summmarize(mean_body_mass_migr_strat = mean(migratory_strategy))
eagles <- ecosphere %>%
filter(family=="Accipitridae") %>%
select(common_name, scientific_name, population_size)
glimpse(eagle)
glimpse(eagles)
eagles %>%
mutate(conservation_status = population_size<250000) %>%
select(common_name,scientific_name,population_size,conservation_status)
eagles_new <- eagles %>%
mutate(conservation_status = population_size<250000) %>%
select(common_name,scientific_name,population_size,conservation_status)
eagles_new %>%
anyNA(conservation_status)
eagles_new %>%
tabyl(conservation_status)
View(ecosphere)
ecosphere %>%
group_by(habitat) %>%
summarise(across(log10_mass), na.rm = T)
summarise(across(c(habitat,log10_mass), na.rm = T)
ecosphere %>%
summarise(across(c(log10_mass), na.rm = T)
ecosphere %>%
ecosphere %>%
group_by(habitat) %>%
summarise(log10_mass), na.rm = T)
ecosphere %>%
group_by(habitat) %>%
summarise(mean(log10_mass), na.rm = T)
ecosphere %>%
group_by(habitat) %>%
summarise(mean(log10_mass),
total=n())
ducks %>%
group_by(migratory_strategy) %>%
summmarize(mean_body_mass_migr_strat = mean(log10_mass),
total=n())
ducks %>%
group_by(migratory_strategy) %>%
summmarize(mean(log10_mass),
total=n())
ducks %>%
group_by(migratory_strategy) %>%
summmarise(mean(log10_mass),
total=n())
ducks %>%
group_by(migratory_strategy)
ducks %>%
group_by(migratory_strategy) %>%
group_by(habitat) %>%
summarise(mean(log10_mass),
total=n())
ducks %>%
group_by(migratory_strategy) %>%
summarise(mean(log10_mass),
total=n())
?ducks$withdrawl
eagles_new <- eagles %>%
mutate(conservation_status = population_size<250000) %>%
select(common_name,scientific_name,population_size,conservation_status)
ecosphere %>%
group_by(habitat) %>%
summarise(ave_mass = mean(log10_mass),
total=n())
ecosphere %>%
group_by(habitat) %>%
summarise(ave_mass = mean(log10_mass),
total=n()) %>%
select(habitat, ave_mass, total, diet)
ecosphere %>%
group_by(habitat) %>%
summarise(ave_mass = mean(log10_mass),
total=n()) %>%
ecosphere %>%
group_by(habitat) %>%
summarise(ave_mass = mean(log10_mass),
total=n())
ecosphere %>%
group_by(habitat) %>%
summarise(ave_mass = mean(log10_mass),
total=n())
eagles_new %>%
table(conservation_status)
eagles_new %>%
tabyl(conservation_status)
eagles_new %>%
count(conservation_status)
eagles_new %>%
filter(conservation_status=="NA")
eagles_new %>%
filter(conservation_status=="NA")
eagles_new %>%
filter(conservation_status != TRUE, FALSE)
eagles_new <- eagles %>%
mutate(conservation_status = population_size<250000) %>%
select(common_name,scientific_name,population_size,conservation_status)
eagles_new
eagles_new %>%
sort(conservation_status)
eagles_new %>%
sort(conservation_status = T)
class(conservation_status)
class(conservation_status)
?lgl
eagles_new$conservation_status <- as.factor(eagles_new$conservation_status)
eagles_new
eagles_new %>%
filter(conservation_status=="NA")
eagles_new %>%
filter(conservation_status!="TRUE","FALSE")
eagles_new %>%
filter(conservation_status!= TRUE, FALSE)
eagles_new %>%
filter(conservation_status != "TRUE", "FALSE")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
ecosphere <- read_csv("data/ecs21351-sup-0003-SupplementS1.csv", skip=2) %>%
clean_names() %>%
slice(1:(n() - 18)) # this removes the footer
names(ecosphere)
glimpse(ecosphere)
ecosphere %>%
summarize(distinct_orders_birds = n_distinct(order))
ecosphere %>%
group_by(habitat) %>%
summarize(total=n())
?slice_max
slice_max(ecosphere, winter_range_area)
slice_min(ecosphere, winter_range_area)
ducks <- ecosphere %>%
filter(family=="Anatidae") %>%
select(!c(order, family))
names(ducks)
names(ecosphere)
ducks %>%
group_by(habitat) %>%
summarize(total=n())
ducks %>%
filter(habitat=="Ocean")
names(ducks)
ducks %>%
group_by(migratory_strategy) %>%
summarise(mean(log10_mass),
total=n())
eagles <- ecosphere %>%
filter(family=="Accipitridae") %>%
select(common_name, scientific_name, population_size)
glimpse(eagles)
eagles_new <- eagles %>%
mutate(conservation_status = population_size<250000) %>%
select(common_name,scientific_name,population_size,conservation_status)
eagles_new
eagles_new %>%
filter(conservation_status != "TRUE", "FALSE")
eagles_new %>%
filter(conservation_status != "TRUE", "FALSE")
eagles_new %>%
filter(conservation_status != "TRUE", "FALSE")
eagles_new %>%
filter(conservation_status != TRUE, FALSE)
eagles_new %>%
filter(conservation_status != TRUE & conservation_status != FALSE)
eagles_new %>%
#  filter(conservation_status != TRUE & conservation_status != FALSE)
filter(is.na(conservation_status))
ecosphere %>%
group_by(habitat) %>%
select(habitat, diet)
?slice_max
ecosphere %>%
group_by(habitat) %>%
summarise(ave_mass = mean(log10_mass),
total=n())
ecosphere %>%
group_by(habitat) %>%
summarise(ave_mass = mean(log10_mass),
total=n())
ecosphere %>%
filter(family == "Alcidae")
ecosphere %>%
filter(family == "Alcidae") %>%
group_by(habitat)
ecosphere %>%
group_by(habitat) %>%
filter(family == "Alcidae") %>%
ecosphere %>%
group_by(habitat) %>%
filter(family == "Alcidae")
ecosphere %>%
filter(family == "Alcidae")
ecosphere %>%
filter(family == "Alcidae") %>%
select(common_name, diet, migratory_strategy, habitat, log10_mass)
ecosphere %>%
filter(family == "Alcidae") %>%
select(common_name, diet, migratory_strategy, habitat, log10_mass) %>%
group_by(migratory_strategy)
ecosphere %>%
group_by(migratory_strategy) %>%
filter(family == "Alcidae") %>%
select(common_name, diet, migratory_strategy, habitat, log10_mass)
ecosphere %>%
group_by(migratory_strategy) %>%
filter(family == "Alcidae") %>%
select(common_name, diet, migratory_strategy, habitat, log10_mass)
ecosphere %>%
group_by(migratory_strategy) %>%
filter(family == "Alcidae")
ecosphere %>%
group_by(migratory_strategy) %>%
filter(family == "Alcidae") %>%
arrange(log10_mass)
ecosphere %>%
filter(family == "Alcidae") %>%
arrange(log10_mass) %>%
select(common_name, log10_mass, population_size)
ecosphere %>%
filter(family == "Alcidae") %>%
arrange(log10_mass) %>%
select(common_name, log10_mass, population_size, mean_eggs_per_clutch)
